---
title: "Main"
author: "willy"
date: "2024-03-20"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(rstan)
library(rstanarm)
library(coda)
library(mvtnorm)
library(ggplot2)
library(bayesplot)
source("willy.R")
source("hugo.R")
```

## Importation

```{r}
TARGET_FEATURE = "percenttp"

RawData = ImportData("Q14_survey_for_dataverse.csv")
```


```{r}
Data <- remove_columns(RawData, c("firstthought", "recent", "tpfeel", "biggest", "paystub", "depend", "glad", "upset", "benefit", "wastethink","eitcexp", "eitcthink"))
Data <- CleanData(Data)
summary(Data)

Data <- to_factor(Data, columns_to_exclude = c("percenttp", "wastecents", "feelfedgov_1"))
```

```{r}
model <- BayesianLinearRegression(Data, TARGET_FEATURE, prior = normal(location = 0, scale = 10), prior_intercept = normal(location = 0, scale = 10))
```

```{r}
mse <- BayesianMSE(model, Data, TARGET_FEATURE)
SummaryMCMC(model)
```

```{r}
PlotMCMC(model, Data, TRUE)
```

```{r}
MCMCTrace(model)

MCMCRhat(model)
```


```{r}
TestMCMCRstanarm()
```

```{r}
TestMCMCRstan()
```
